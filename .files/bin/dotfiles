#!/usr/bin/env bash

# environment variables
export REPO_URL=https://github.com/lukasdanckwerth/dotfiles.git
export GIT_WORK_TREE=$HOME
export GIT_DIR=$HOME/.files.git

export COMMANDS_DIR="${DOTFILES}/commands"

# lists all files in the commands directory
function list_commands() {
   for A_FILE in $COMMANDS_DIR/*; do
      echo - $(basename $A_FILE)
   done
}

# runs the 
function run_command() {
   if [ ! -f "$COMMANDS_DIR/${1}" ] ; then
      echo "error: unknown command '${1}'"
      exit 0
   else
      source $COMMANDS_DIR/${*}
   fi
}

if [ $# -eq 0 ] ; then
   list_commands
else
   run_command ${*}
fi
